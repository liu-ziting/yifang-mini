<view class="step-content fade-in">
  <view class="cuisine-section">
    <block wx:for="{{cuisineSections}}" wx:for-item="section" wx:for-index="sIdx" wx:key="title">
      
      <!-- Custom Card Stack Container -->
      <view 
        class="card-stack-container"
        bindtouchstart="onTouchStart"
        bindtouchmove="onTouchMove"
        bindtouchend="onTouchEnd"
        data-section-index="{{sIdx}}"
      >
        <block wx:for="{{section.items}}" wx:for-item="item" wx:for-index="iIdx" wx:key="id">
          <view 
            class="stack-card {{selectedCuisineId === item.id ? 'is-active' : ''}}" 
            style="{{cardStyles[sIdx][iIdx] || ''}}; z-index: {{100 - iIdx}};"
            data-id="{{item.id}}"
            data-index="{{iIdx}}"
            catchtap="onCardTap"
          >
            <view class="chef-avatar">{{item.avatar}}</view>
            <view class="chef-info">
              <view class="chef-name">{{item.name}}</view>
              <view class="chef-desc">{{item.description}}</view>
              <view class="chef-specialty">擅长: {{item.specialty}}</view>
            </view>
          </view>
        </block>
      </view>
    </block>
  </view>

  <view class="action-area btn-group">
    <button class="generate-btn btn-secondary" bindtap="prevStep" hover-class="btn-hover">
      <text>上一步</text>
    </button>
    <button class="generate-btn btn-primary" bindtap="onGenerate" hover-class="btn-hover">
      <text>开始生成</text>
      <t-icon name="magic" size="20px" color="#fff" style="margin-left:8px;"/>
    </button>
  </view>
</view>
