<view class="container">
  <!-- 加载动画蒙层 -->
  <view class="loading-overlay" wx:if="{{loading}}">
    <view class="loading-content">
      <t-loading theme="circular" size="50px" class="custom-loading-icon" text="" inherit-color />
      <view class="loading-text">{{loadingText}}</view>
    </view>
  </view>

  <!-- 结果展示 -->
  <scroll-view scroll-y style="height: 100vh; background: #fff;" wx:if="{{recipe && !loading}}">
    
    <!-- 菜谱头图 -->
    <view class="recipe-header">
      <image src="{{recipe.image}}" mode="aspectFill" class="recipe-img"></image>
      <!-- 返回按钮 -->
      <view class="back-btn" bindtap="onBack" style="{{backBtnStyle}}">
        <t-icon name="chevron-left" size="24px" color="#fff"/>
      </view>
      <view class="recipe-header-content">
        <view class="recipe-title">{{recipe.title}}</view>
      </view>
    </view>

    <!-- 详细内容 -->
    <view class="recipe-body">
      <!-- 仪表盘数据 -->
      <view class="dashboard">
        <view class="dash-item">
          <view class="dash-val">{{recipe.calories}}</view>
          <view class="dash-label">卡路里</view>
        </view>
        <view class="dash-line"></view>
        <view class="dash-item">
          <view class="dash-val">{{recipe.time}}</view>
          <view class="dash-label">时长</view>
        </view>
        <view class="dash-line"></view>
        <view class="dash-item">
          <view class="dash-val" >{{recipe.difficulty}}</view>
          <view class="dash-label">难度</view>
        </view>
      </view>

      <view class="section-header">大厨说</view>
      <view class="recipe-desc">{{recipe.desc}}</view>

      <view class="section-header">烹饪步骤</view>
      <view class="step-list">
        <block wx:for="{{recipe.steps}}" wx:key="index">
          <view class="step-card">
            <view class="step-num">{{index + 1}}</view>
            <view class="step-info">
              <view class="step-title">{{item.title}}</view>
              <view class="step-meta">
                <text class="step-time" wx:if="{{item.time}}"><t-icon name="time" size="14px" style="margin-right: 4rpx;"/>{{item.time}}</text>
                <text class="step-heat" wx:if="{{item.heat}}"><t-icon name="fire" size="14px" style="margin-right: 4rpx;"/>{{item.heat}}</text>
              </view>
              <view class="step-desc">{{item.desc}}</view>
            </view>
          </view>
        </block>
      </view>

      <view class="section-header">烹饪技巧</view>
      <view class="tips-card">
        <block wx:for="{{recipe.tips}}" wx:key="index">
          <view class="tip-item">
            <view class="tip-dot"></view>
            <view class="tip-text">{{item}}</view>
          </view>
        </block>
      </view>

      <view class="section-header">营养分析</view>
      <view class="nutrition-card">
        <block wx:for="{{recipe.nutrition}}" wx:key="name">
          <view class="nutrition-item">
            <view class="nutrition-name">{{item.name}}</view>
            <view class="nutrition-val">{{item.value}}</view>
          </view>
        </block>
      </view>

      <!-- 底部留白 -->
      <view style="height: 60px;"></view>
    </view>
  </scroll-view>
</view>